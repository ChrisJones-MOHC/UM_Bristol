<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.26.2 by Michael Rose
  Copyright 2013-2024 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>HadCM3 Workflow - HadCM3 Documentation</title>
<meta name="description" content="HadCM3 Workflow">


  <meta name="author" content="Dan Lunt">
  
  <meta property="article:author" content="Dan Lunt">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="HadCM3 Documentation">
<meta property="og:title" content="HadCM3 Workflow">
<meta property="og:url" content="http://localhost:4000/UM_Bristol/hadcm3_user_notes/HadCM3_Workflow/">


  <meta property="og:description" content="HadCM3 Workflow">







  <meta property="article:published_time" content="2025-02-17T12:07:18+00:00">





  

  


<link rel="canonical" href="http://localhost:4000/UM_Bristol/hadcm3_user_notes/HadCM3_Workflow/">












<!-- end _includes/seo.html -->



  <link href="/UM_Bristol/feed.xml" type="application/atom+xml" rel="alternate" title="HadCM3 Documentation Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script type="text/javascript">
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  window.enable_copy_code_button = true;
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/UM_Bristol/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/UM_Bristol/">
          HadCM3 Documentation
          
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/UM_Bristol/Editing_guide"
                
                
              >Editing Guide</a>
            </li><li class="masthead__menu-item">
              <a
                href="https://github.com/danlunt1976/UM_Bristol"
                
                
              >About</a>
            </li></ul>
        
        <button class="search__toggle" type="button">
          <span class="visually-hidden">Toggle search</span>
          <i class="fas fa-search"></i>
        </button>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      




  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/UM_Bristol/" itemprop="item"><span itemprop="name">Home</span></a>

          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="/UM_Bristol/hadcm3_user_notes" itemprop="item"><span itemprop="name">Hadcm3_user_notes</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">HadCM3 Workflow</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="HadCM3 Workflow">
    <meta itemprop="description" content="HadCM3 Workflow">
    
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="http://localhost:4000/UM_Bristol/hadcm3_user_notes/HadCM3_Workflow/" itemprop="url">HadCM3 Workflow
</a>
          </h1>
          

  <p class="page__meta">
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          5 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
              <ul class="toc__menu"><li><a href="#hadcm3-workflow">HadCM3 Workflow</a></li><li><a href="#introduction">Introduction</a></li><li><a href="#typical-workflow">Typical Workflow</a></li><li><a href="#code-performance">Code Performance</a></li><li><a href="#number-of-simulations">Number of simulations</a></li></ul>
            </nav>
          </aside>
        
        <!-- [Back to HadCM3_user_notes](HadCM3_user_notes.md) -->

<h1 id="hadcm3-workflow">HadCM3 Workflow</h1>

<h1 id="introduction">Introduction</h1>

<p>The BRIDGE (Bristol Research Initiative for the Dynamic Global Environment) research group works with collaborators at XTBG (Xishuanbanna Tropical Botanical Garden) use computer models to research past, present and future climate change, investigate the causes of these changes, and the impact on plants and biodiversity. We use plant fossil data combined with computer models of climate and vegetation. Climate models require high performance computing.</p>

<p>Computer climate models work by simulating the day-to-day variations of weather, and then creating the climate by performing statistical analysis of the resulting output. Substantial computing resources are needed to both run the models, and store the “weather” output before it is processed into climate.</p>

<p>HadCM3/HadAM3/HadRM3 Software</p>

<p>We use the Hadley Centre climate model for all of our research. This is a relatively old climate model (developed in 1999) but has the benefit that it is computationally cheap so that we can perform long simulations and multiple sensitivity studies.</p>

<p>The software consists of three major components:</p>

<p>a. The scientific code base is about 500,000 lines of fortran 77 code.</p>

<p>b. Data output and the interface to parallisation library is about 20,000 line of C</p>

<p>c. A relatively complex set of korn shell scripts control the simulation (20,000 lines)</p>

<p>The code requires the mpirun library to be installed</p>

<p>In addition to the Hadley centre, there is also a code base required to convert output data to a common format (netcdf) and then process the output to produce the climate data. This is about another 200,000 lines of code, in a range of languages (C, Fortran, and bash). It also uses the nco and cdo operators (free netcdf processing software). Almost all of this code is single core.</p>

<h1 id="typical-workflow">Typical Workflow</h1>

<p> To perform a simulation requires the following steps:</p>

<ol>
  <li>
    <p>Prepare the “job” to be submitted. This uses a software tool called <strong>umui</strong> which is run on a UK university computer. Although this could also be copied to other servers, there is no requirement to do so. Furthermore, there is benefit in continuing to use one version so that there remains a unique and single database of all simulations. The output from the umui is a set of files which need to be copied onto the HPC machine.</p>
  </li>
  <li>
    <p>Prepare the input data for the simulation. This typically uses a range of tools, depending on the user and the scientific motivation. This normally is very quick to run. The input data needs to be copied to the HPC machine.</p>
  </li>
  <li>
    <p>Compile the fortran and c code on the HPC machine</p>
  </li>
  <li>
    <p>Run the resulting executable. This may take weeks or more to run.</p>
  </li>
  <li>
    <p>Depending on file storage on the HPC machines, it is likely that data needs to be transferred from the HPC machine to a machine which has significant storage.</p>
  </li>
  <li>
    <p>The data also needs to be converted from a non-standard format to netcdf (a widely used format for geographical data). We often do this at the same time as transferring data</p>
  </li>
  <li>
    <p>Once the whole simulation is completed, a set of programs and scripts need to be run to calculate the climate (the average of the weather data and other statistics). The climate output needs to be stored for many years.</p>
  </li>
  <li>
    <p>Once the climate output has been produced, it is often OK to either delete or archive the weather data. Archiving is best for long simulations where it has taken a lot of effort to produce the data, whereas we some times delete smaller/shorter simulations when it would be simple to rerun the model is further analysis is required.</p>
  </li>
  <li>
    <p>Scientific analysis and discovery of the climate output. This requires a lot of investigation and the production of many different graphics.</p>
  </li>
</ol>

<h1 id="code-performance">Code Performance</h1>

<p>The performance of the model depends on the grid size used to represent the Earth system. It also depends on whether the model represents only the atmosphere or is also coupled to the ocean. If the model includes the ocean, then it is likely that longer simulations are required to allow the ocean to come into equilibrium with the rest of the system.</p>

<p>The following table summarises the computing and disk requirements for a range of different model configurations:</p>

<table>
  <thead>
    <tr>
      <th>Model Name</th>
      <th>Atmosphere Resolution</th>
      <th>Ocean Levels</th>
      <th>Typical number cores $^a$</th>
      <th>Run Speed $^{b,c}$</th>
      <th>Typical length of run</th>
      <th>Typical Duration of run $^d$</th>
      <th>Total number of core hours</th>
      <th>Typical Amount of raw “weather” output</th>
      <th>Typical Amount of climate output</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>HadCM3</td>
      <td>96 longitudes, 73 latitudes,<br /><br />19 levels</td>
      <td>288 longitudes,<br /><br />144 latitudes, 20 levels</td>
      <td>28</td>
      <td>100 model years per day</td>
      <td>5000 years</td>
      <td>7 weeks</td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>HadCM3L</td>
      <td>96 longitudes, 73 latitudes,<br /><br />19 levels</td>
      <td>96 longitudes,<br /><br />73 latitudes,<br /><br />20 levels</td>
      <td>28</td>
      <td> </td>
      <td>5000 years</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>HadAM3</td>
      <td>96 longitudes, 73 latitudes,<br /><br />19 levels</td>
      <td> </td>
      <td>28</td>
      <td> </td>
      <td>100 years</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>HadAM3-N216</td>
      <td>432 longitudes, 325 latitudes,<br /><br />30 levels</td>
      <td> </td>
      <td>84</td>
      <td> </td>
      <td>100 years</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>HadRM3_0.44</td>
      <td>96 longitudes, 73 latitudes,<br /><br />19 levels</td>
      <td> </td>
      <td>28</td>
      <td> </td>
      <td>100 years</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
    <tr>
      <td>HadRM3_0.11</td>
      <td>96 longitudes, 73 latitudes,<br /><br />19 levels</td>
      <td> </td>
      <td>28</td>
      <td> </td>
      <td>100 years</td>
      <td> </td>
      <td> </td>
      <td> </td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p>$^a$ The model parallelises well across cores within the same motherboard. For instance, in the example above, there were two chips (each with 14 cores) on the same motherboard. It is also very flexible and we can run with any number of cores. The parallisation is poorer when running across several nodes and often completely fails to lead to further performance increases. The key influence is the inter-node transfer speed. Machine with faster internal networking (such as infiniband) allow for better parallelisation across nodes.</p>

<p>$^b$ Based on intel xeon chips, but about 5 years old.</p>

<p>$^c$ Run speed is controlled by the clock speed and number of cores, but is also influenced by the memory speed/structure and disk speed (writing output to disk can be a bottleneck)</p>

<p>$^d$ This does not include any time spent queuing. The model can be stopped and restarted at any time and is efficient at restarting so individual steps can be any length.</p>

<h1 id="number-of-simulations">Number of simulations</h1>

<p>Paleoclimate simulations have a number of uncertainties and to fully quantify this uncertainty requires…</p>


        
      </section>

      <footer class="page__meta">
        
        


        

      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=HadCM3+Workflow%20http%3A%2F%2Flocalhost%3A4000%2FUM_Bristol%2Fhadcm3_user_notes%2FHadCM3_Workflow%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=http%3A%2F%2Flocalhost%3A4000%2FUM_Bristol%2Fhadcm3_user_notes%2FHadCM3_Workflow%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/UM_Bristol/hadcm3_user_notes/HadCM3_Workflow/" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/UM_Bristol/hadcm3_user_notes/HadCM3_CMIP7/" class="pagination--pager" title="HadCM3 for CMIP7
">Previous</a>
    
    
      <a href="/UM_Bristol/hadcm3_user_notes/Nils_notes_for_running_HadCM3B/" class="pagination--pager" title="Nils notes for running HadCM3B
">Next</a>
    
  </nav>

    </div>

    
      
        <p>
          Comments are configured with provider: <strong>disqus</strong>,
          but are disabled in non-production environments.
        </p>
      
    
  </article>

  
    
    
    
    
    
    
    
<div class="page__related">
  
  <h2 class="page__related-title">You may also enjoy</h2>
  <div class="grid__wrapper">
    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/UM_Bristol/hadcm3_technical_notes/PUMA/" rel="permalink">PUMA
</a>
      
    </h2>
    

  <p class="page__meta">
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">PUMA
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/UM_Bristol/hadcm3_technical_notes/Documentation/" rel="permalink">Documentation
</a>
      
    </h2>
    

  <p class="page__meta">
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          less than 1 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Documentation
</p>
  </article>
</div>

    
      
      



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/UM_Bristol/hadcm3_user_notes/Running_Ensembles_on_bluecrystalp4/" rel="permalink">Running Ensembles on bluecrystalp4
</a>
      
    </h2>
    

  <p class="page__meta">
    

    <span class="page__meta-sep"></span>

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-fw fa-clock" aria-hidden="true"></i>
        
          11 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Running Ensembles on bluecrystalp4
</p>
  </article>
</div>

    
  </div>
</div>

  
</div>

      
    </div>

    
      <div class="search-content">
        <div class="search-content__inner-wrap"><form class="search-content__form" onkeydown="return event.key != 'Enter';" role="search">
    <label class="sr-only" for="search">
      Enter your search term...
    </label>
    <input type="search" id="search" class="search-input" tabindex="-1" placeholder="Enter your search term..." />
  </form>
  <div id="results" class="results"></div></div>

      </div>
    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    
      <li><a href="/UM_Bristol/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
    
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2025 <a href="http://localhost:4000">HadCM3 Documentation</a>. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/UM_Bristol/assets/js/main.min.js"></script>




<script src="/UM_Bristol/assets/js/lunr/lunr.min.js"></script>
<script src="/UM_Bristol/assets/js/lunr/lunr-store.js"></script>
<script src="/UM_Bristol/assets/js/lunr/lunr-en.js"></script>




    
  <script>
    var disqus_config = function () {
      this.page.url = "http://localhost:4000/UM_Bristol/hadcm3_user_notes/HadCM3_Workflow/";  /* Replace PAGE_URL with your page's canonical URL variable */
      this.page.identifier = "/hadcm3_user_notes/HadCM3_Workflow"; /* Replace PAGE_IDENTIFIER with your page's unique identifier variable */
    };
    (function() { /* DON'T EDIT BELOW THIS LINE */
      var d = document, s = d.createElement('script');
      s.src = 'https://um_bristol.disqus.com/embed.js';
      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


  




  </body>
</html>
